* hello-world blocklet

** a hello world script that will reponse my click
   #+BEGIN_SRC shell :tangle /tmp/my_hello_script
    #!/bin/bash

    echo 'hello world'
  #+END_SRC

  #+BEGIN_SRC shell
    # set the script execute
    chmod u+x /tmp/my_hello_script 
  #+END_SRC
  
  
** test with the $BLOCK_BUTTON var
   #+BEGIN_SRC shell :tangle /tmp/test_button
     #!/bin/bash

     echo 'click me!'

     case $BLOCK_BUTTON in
	 *) echo $BLOCK_BUTTON ;;
     esac
   #+END_SRC

* The pomodoro script for i3bar
  *注意*: 使用这个脚本必须安装 =i3blocks=, =gnome-pomodoro=, =i3-gnome-pomodoro=
  这个脚本包装了 =i3-gnome-pomodor= 并且响应用户的鼠标点击事件
  #+BEGIN_SRC shell :tangle ~/.pomodoro_script
    #!/bin/bash

    # is pomodor is running ?
    # is running return 0
    # else return 1
    function is_exists() {
	COUNT=$(ps -ef | grep "gnome-pomodoro" | grep -v "grep" | wc -l)
	STATUS=$(i3-gnome-pomodoro status)

	if [ -z "$STATUS" ] || [ 0 == "$COUNT" ]
	then
	    return 1 # return the error code
	else
	    return 0 # return success code
	fi
    }

    # start the pomodoro by condition
    # if pomodor is running. use i3-gnome-pomodoro toggle
    # else use i3-gnome-pomodoro start
    function start_pomodoro() {
	echo 'in this'
	if is_exists; then
	    i3-gnome-pomodoro toggle
	else
	    i3-gnome-pomodoro start
	fi
    }

    # echo the message.
    # running: pomodoro status. .e.g: pomodoro 14:15
    POMODORO_CURRENT_STATUS=$(i3-gnome-pomodoro status)
    IS_POMODORO_PAUSED=$(i3-gnome-pomodoro status | grep "PAUSED" | wc -l)
    if is_exists
    then
	if [ 1 == "$IS_POMODORO_PAUSED" ]
	then
	    echo "<span foreground='#FF952B'>$POMODORO_CURRENT_STATUS</span>"
	else
	    echo "<span foreground='#90C3D4'>$POMODORO_CURRENT_STATUS</span>"
	fi
    else
	echo "<span foreground='#A1D490'>start new pomodoro</span>"
    fi

    case $BLOCK_BUTTON in
	1) start_pomodoro ;; ## start the pomodoro
	3) i3-gnome-pomodoro reset ;; ## stop the pomodoro
	4) i3-gnome-pomodoro skip ;; # skip current pomodoro
    esac
  #+END_SRC
  
  之后在 ~i3blocks~ 的配置文件 (=$HOME/.i3blocks.conf=) 里面写入以下内容。
  #+BEGIN_SRC shell 
    [pomodoro]
    command=$HOME/.pomodoro_script
    interval=1
  #+END_SRCn
